import cv2
import os

print("Working directory:", os.getcwd())

vidcap = cv2.VideoCapture("test.mp4")

if not vidcap.isOpened():
    print("❌ Video not opened")
    exit()

BASE_DIR = os.getcwd()
FRAMES_DIR = os.path.join(BASE_DIR, "frames")
os.makedirs(FRAMES_DIR, exist_ok=True)

count = 0

while True:
    ret, image = vidcap.read()

    if not ret:
        print("❌ No more frames. Total saved:", count)
        break

    if image is None:
        print("⚠ Frame is None at", count)
        continue

    save_path = os.path.join(FRAMES_DIR, f"image_{count}.jpg")
    success = cv2.imwrite(save_path, image)

    print(f"Saving {save_path} →", success)

    count += 1

vidcap.release()
cv2.destroyAllWindows()
